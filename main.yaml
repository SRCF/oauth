---
- name: Install nginx
  hosts: oauth
  become: yes
  become_user: root
  tags:
    - nginx
  vars:
    - server_address: cloudburst.srcf.net
  roles:
    - nginx

- name: Install ufw
  hosts: oauth
  become: yes
  become_user: root
  tags:
    - ufw
  vars:
    - server_address: cloudburst.srcf.net
  roles:
    - ufw

- name: Install hydra
  hosts: oauth
  become: yes
  become_user: root
  tags:
    - hydra
  vars:
    - server_address: cloudburst.srcf.net
    - hydra_system_secret: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30333831333839376261313561363338653131383533333036653864363739396531653764373134
          6238353466356461343263646235333433633461613361630a646239393465363139613434313231
          66633261316136616636346466386663346532353330393939313264396236386166653666626465
          6338323630613966650a626164386361306637343236663739373766643031376535646261396537
          64663861656636366137333265646337353733396263303035356131393664353230363637353639
          3530383638356330316264393366666230653638383566323237
    - hydra_cookie_secret: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          38363234346530373939396339626165336635393463323037383765653665643634613636333364
          6534636463333864376239376239663430643962633339370a623036306162373638343564366238
          33666535346136323830363338376232346661346439326437356436643366656361303766306530
          6330326637353262640a366462663436346338663530646631393234373939333930623134353630
          64316537306531383236366364366137626635326339333638376435613365643635336637646235
          3938646163336366363638313130333036376334323238623137
  roles:
    - hydra

- name: Install flow
  hosts: oauth
  become: yes
  become_user: root
  tags:
    - flow
  vars:
    - server_address: cloudburst.srcf.net
    - flask_secret_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35646637626466353733396434366130353631316266376366646535643931363762636639356166
          6438326464653966616366643865303932663130636130340a346264383037353238646364663635
          64623839666362363137366464633736313561386332643362666234396131363866333531363933
          6232646666346237630a373433646161346362353235613232613133336638656466623734313038
          31396436343366363930303464653163383932303836333338346534656630643532343236656665
          62646431343932666535346561313866613732356137376139653131383666623164626235343661
          63373161343866663963393361366466356166303661343062346363353937663464326132313534
          64386663323232663066
  roles:
    - flow
